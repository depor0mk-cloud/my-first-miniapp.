<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Hakos Premium Clicker</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #0f172a;
            --accent: #a855f7; /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –ø—Ä–µ–º–∏—É–º */
            --glass: rgba(30, 41, 59, 0.7);
            --border: rgba(255, 255, 255, 0.1);
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            background: radial-gradient(circle at top, #1e1b4b 0%, #0f172a 100%);
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            padding-top: env(safe-area-inset-top); /* –û—Ç—Å—Ç—É–ø –æ—Ç –≤—ã—Ä–µ–∑–∞ –∫–∞–º–µ—Ä—ã */
            overflow: hidden;
        }

        /* –°—á–µ—Ç */
        #header {
            text-align: center;
            margin-top: 40px;
            z-index: 10;
        }

        #score {
            font-size: 72px;
            font-weight: 900;
            margin: 0;
            background: linear-gradient(to bottom, #fff, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-line {
            color: #94a3b8;
            font-size: 16px;
            font-weight: 500;
        }

        /* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ - –ó–≤–µ–∑–¥–∞ */
        .click-area {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }

        #star-btn {
            width: 250px;
            height: 250px;
            background: linear-gradient(135deg, #a855f7 0%, #6366f1 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 0 60px rgba(168, 85, 247, 0.4), inset 0 0 20px rgba(255,255,255,0.2);
            border: 8px solid rgba(255,255,255,0.1);
            cursor: pointer;
            transition: transform 0.05s;
        }

        #star-btn:active { transform: scale(0.92); }

        /* SVG –ó–≤–µ–∑–¥–∞ */
        .star-icon {
            width: 130px;
            height: 130px;
            fill: white;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
        }

        /* –ú–∞–≥–∞–∑–∏–Ω - –°—Ç–µ–∫–ª—è–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å */
        .shop-panel {
            width: 90%;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--border);
            border-left: 1px solid var(--border);
            border-radius: 24px;
            padding: 20px;
            margin-bottom: 30px;
            max-height: 40vh;
            overflow-y: auto;
        }

        .item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0,0,0,0.2);
            padding: 12px 16px;
            border-radius: 16px;
            margin-bottom: 10px;
        }

        .item-info b { display: block; font-size: 14px; }
        .item-info span { font-size: 12px; color: #94a3b8; }

        .buy-btn {
            background: white;
            color: black;
            border: none;
            padding: 8px 16px;
            border-radius: 10px;
            font-weight: 800;
            font-size: 14px;
        }

        .buy-btn:disabled { opacity: 0.3; }

    </style>
</head>
<body>

    <div id="header">
        <p class="stat-line" id="click-power-display">–°–∏–ª–∞ –∫–ª–∏–∫–∞: 1</p>
        <h1 id="score">0</h1>
        <p class="stat-line" id="pps-display">–î–æ–±—ã—á–∞: 0/—Å–µ–∫</p>
    </div>

    <div class="click-area">
        <div id="star-btn" onclick="handleClick()">
            <svg class="star-icon" viewBox="0 0 24 24">
                <path d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"/>
            </svg>
        </div>
    </div>

    <div class="shop-panel">
        <div class="item">
            <div class="item-info">
                <b>‚ö°Ô∏è –°–∏–ª–∞ –∫–ª–∏–∫–∞</b>
                <span id="click-cost">–¶–µ–Ω–∞: 150</span>
            </div>
            <button class="buy-btn" id="btn-click" onclick="upgradeClick()">–ö—É–ø–∏—Ç—å</button>
        </div>
        <div class="item">
            <div class="item-info">
                <b>ü§ñ –ü—Ä–æ–∫—Å–∏-—É–∑–µ–ª</b>
                <span id="cost1">–¶–µ–Ω–∞: 50</span>
            </div>
            <button class="buy-btn" id="btn1" onclick="buyItem(1)">–ö—É–ø–∏—Ç—å</button>
        </div>
        <div class="item">
            <div class="item-info">
                <b>üè¢ –î–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä</b>
                <span id="cost2">–¶–µ–Ω–∞: 500</span>
            </div>
            <button class="buy-btn" id="btn2" onclick="buyItem(2)">–ö—É–ø–∏—Ç—å</button>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        let score = parseFloat(localStorage.getItem('h_score')) || 0;
        let pps = parseFloat(localStorage.getItem('h_pps')) || 0;
        let clickPower = parseInt(localStorage.getItem('h_power')) || 1;
        
        let costs = JSON.parse(localStorage.getItem('h_costs')) || {
            click: 150,
            item1: 50,
            item2: 500
        };

        function updateUI() {
            document.getElementById('score').innerText = Math.floor(score);
            document.getElementById('pps-display').innerText = `–î–æ–±—ã—á–∞: ${pps.toFixed(1)}/—Å–µ–∫`;
            document.getElementById('click-power-display').innerText = `–°–∏–ª–∞ –∫–ª–∏–∫–∞: ${clickPower}`;
            
            document.getElementById('click-cost').innerText = `–¶–µ–Ω–∞: ${Math.floor(costs.click)}`;
            document.getElementById('cost1').innerText = `–¶–µ–Ω–∞: ${Math.floor(costs.item1)}`;
            document.getElementById('cost2').innerText = `–¶–µ–Ω–∞: ${Math.floor(costs.item2)}`;

            document.getElementById('btn-click').disabled = score < costs.click;
            document.getElementById('btn1').disabled = score < costs.item1;
            document.getElementById('btn2').disabled = score < costs.item2;
        }

        function handleClick() {
            score += clickPower;
            updateUI();
            if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
        }

        function upgradeClick() {
            if(score >= costs.click) {
                score -= costs.click;
                clickPower += 2;
                costs.click *= 2.2; // –ò–Ω—Ñ–ª—è—Ü–∏—è –¥–ª—è –∫–ª–∏–∫–∞
                save();
                updateUI();
            }
        }

        function buyItem(id) {
            if(id === 1 && score >= costs.item1) {
                score -= costs.item1;
                pps += 0.5;
                costs.item1 *= 1.5;
            } else if(id === 2 && score >= costs.item2) {
                score -= costs.item2;
                pps += 5;
                costs.item2 *= 1.6;
            }
            save();
            updateUI();
        }

        function save() {
            localStorage.setItem('h_score', score);
            localStorage.setItem('h_pps', pps);
            localStorage.setItem('h_power', clickPower);
            localStorage.setItem('h_costs', JSON.stringify(costs));
        }

        setInterval(() => {
            score += pps;
            updateUI();
            save();
        }, 1000);

        updateUI();
    </script>
</body>
</html>
