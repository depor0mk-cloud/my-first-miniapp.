<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Hakos Clicker Ultimate</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #38bdf8;
            --bg: #0f172a;
            --card: #1e293b;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg);
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        /* –ú–µ–Ω—é —Å–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞ */
        .header-menu {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        .menu-btn {
            background: var(--card);
            border: 2px solid var(--primary);
            color: white;
            padding: 10px;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—á–∫–æ–≤ */
        #score-container { margin-top: 80px; text-align: center; }
        #score { font-size: 56px; font-weight: 900; color: var(--primary); text-shadow: 0 0 20px rgba(56,189,248,0.3); }
        #pps { color: #94a3b8; font-size: 18px; margin-top: 5px; }

        /* –ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å –±—É–∫–≤–æ–π H */
        #click-btn {
            width: 240px;
            height: 240px;
            background: radial-gradient(circle, #0ea5e9 0%, #0284c7 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 40px;
            cursor: pointer;
            box-shadow: 0 0 50px rgba(2, 132, 199, 0.5);
            transition: transform 0.05s;
            border: 10px solid rgba(255,255,255,0.05);
        }

        #click-btn:active { transform: scale(0.95); }

        .h-logo {
            font-size: 120px;
            font-weight: 900;
            font-family: 'Arial Black', sans-serif;
            color: white;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3));
        }

        /* –ú–∞–≥–∞–∑–∏–Ω (–±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é) */
        .side-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 80%;
            height: 100%;
            background: var(--card);
            transition: 0.3s;
            z-index: 200;
            padding: 20px;
            box-shadow: -10px 0 30px rgba(0,0,0,0.5);
        }

        .side-menu.active { right: 0; }

        .close-btn { color: var(--primary); font-weight: bold; margin-bottom: 20px; display: block; }

        .item {
            background: #0f172a;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 1px solid #334155;
        }

        .buy-btn {
            width: 100%;
            background: var(--primary);
            color: #0f172a;
            border: none;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
            margin-top: 10px;
        }

        .buy-btn:disabled { background: #475569; }

        /* –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞) */
        #leaderboard-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.95);
            z-index: 300;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>

    <div class="header-menu">
        <button class="menu-btn" onclick="toggleShop(true)">–ú–ê–ì–ê–ó–ò–ù</button>
        <button class="menu-btn" onclick="toggleLeaderboard(true)">üèÜ</button>
    </div>

    <div id="score-container">
        <div id="score">0</div>
        <div id="pps">–î–æ–±—ã—á–∞: 0/—Å–µ–∫</div>
    </div>

    <div id="click-btn" onclick="handleClick()">
        <span class="h-logo">H</span>
    </div>

    <div id="shop" class="side-menu">
        <span class="close-btn" onclick="toggleShop(false)">‚Üê –ù–ê–ó–ê–î</span>
        <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
        <div class="item">
            <b>ü§ñ –í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ (+1/—Å–µ–∫)</b>
            <div id="cost1">–¶–µ–Ω–∞: 50</div>
            <button class="buy-btn" id="btn1" onclick="buyItem(1)">–ö—É–ø–∏—Ç—å</button>
        </div>
        <div class="item">
            <b>üè¢ –î–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä (+10/—Å–µ–∫)</b>
            <div id="cost2">–¶–µ–Ω–∞: 500</div>
            <button class="buy-btn" id="btn2" onclick="buyItem(2)">–ö—É–ø–∏—Ç—å</button>
        </div>
    </div>

    <div id="leaderboard-overlay">
        <h2>–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h2>
        <div style="background: var(--card); padding: 20px; border-radius: 15px; width: 80%;">
            <p>1. –¢—ã (–õ–µ–≥–µ–Ω–¥–∞) ‚Äî <span id="user-top-score">0</span></p>
            <p style="color: #64748b;">–ó–¥–µ—Å—å —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è —Ç–≤–æ–∏ –¥—Ä—É–∑—å—è...</p>
        </div>
        <button class="menu-btn" style="margin-top: 20px;" onclick="toggleLeaderboard(false)">–ó–ê–ö–†–´–¢–¨</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        let score = parseFloat(localStorage.getItem('score')) || 0;
        let pps = parseFloat(localStorage.getItem('pps')) || 0;
        let item1Cost = parseInt(localStorage.getItem('item1Cost')) || 50;
        let item2Cost = parseInt(localStorage.getItem('item2Cost')) || 500;
        let lastExit = parseInt(localStorage.getItem('lastExit')) || Date.now();

        // –õ–æ–≥–∏–∫–∞ –æ—Ñ—Ñ–ª–∞–π–Ω–∞ (3 —á–∞—Å–∞ = 10800 —Å–µ–∫—É–Ω–¥)
        function checkOffline() {
            let now = Date.now();
            let diff = Math.floor((now - lastExit) / 1000); // —Å–µ–∫—É–Ω–¥ –ø—Ä–æ—à–ª–æ
            if (diff > 0 && pps > 0) {
                let offlineTime = Math.min(diff, 10800); // –Ω–µ –±–æ–ª—å—à–µ 3 —á–∞—Å–æ–≤
                let reward = offlineTime * pps;
                score += reward;
                alert(`–í–∞—Å –Ω–µ –±—ã–ª–æ ${Math.floor(offlineTime/60)} –º–∏–Ω. –ó–∞–≤–æ–¥—ã –ø—Ä–∏–Ω–µ—Å–ª–∏: ${reward} –æ—á–∫–æ–≤!`);
            }
        }

        function toggleShop(show) {
            document.getElementById('shop').classList.toggle('active', show);
        }

        function toggleLeaderboard(show) {
            document.getElementById('leaderboard-overlay').style.display = show ? 'flex' : 'none';
            document.getElementById('user-top-score').innerText = Math.floor(score);
        }

        function updateUI() {
            document.getElementById('score').innerText = Math.floor(score);
            document.getElementById('pps').innerText = `–î–æ–±—ã—á–∞: ${pps}/—Å–µ–∫`;
            document.getElementById('cost1').innerText = `–¶–µ–Ω–∞: ${item1Cost}`;
            document.getElementById('cost2').innerText = `–¶–µ–Ω–∞: ${item2Cost}`;
            document.getElementById('btn1').disabled = score < item1Cost;
            document.getElementById('btn2').disabled = score < item2Cost;
        }

        function handleClick() {
            score += 1;
            updateUI();
        }

        function buyItem(id) {
            if (id === 1 && score >= item1Cost) {
                score -= item1Cost; pps += 1;
                item1Cost = Math.floor(item1Cost * 1.5);
            } else if (id === 2 && score >= item2Cost) {
                score -= item2Cost; pps += 10;
                item2Cost = Math.floor(item2Cost * 1.6);
            }
            updateUI();
        }

        setInterval(() => {
            score += pps;
            updateUI();
            localStorage.setItem('score', score);
            localStorage.setItem('pps', pps);
            localStorage.setItem('item1Cost', item1Cost);
            localStorage.setItem('item2Cost', item2Cost);
            localStorage.setItem('lastExit', Date.now());
        }, 1000);

        checkOffline();
        updateUI();
    </script>
</body>
</html>
